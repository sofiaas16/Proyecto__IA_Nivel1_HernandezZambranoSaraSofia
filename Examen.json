{
  "name": "My workflow",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -16,
        176
      ],
      "id": "9cb949d1-c9d2-4f92-b841-61e26c7aeefa",
      "name": "Telegram Trigger",
      "webhookId": "9d9aeb3c-4045-402d-952f-07a70731cb97",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "text": "=Hola 游땕 쯖칩mo est치s?.\nBienvenida Men칰 principal: \n0. Ayuda \n1. Agenda (citas) \n2. Tareas \n3. Recordatorios \n4. H치bitos \n5. Listas \n6. Reportes \n7. Configuraci칩n \n8. Administrador \n- Mensaje de orientaci칩n:  Tip r치pido: escribe solo el n칰mero (por ejemplo: 1) y presiona enviar.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        752,
        -64
      ],
      "id": "45288d29-581a-4930-b4a6-7d299c3219d6",
      "name": "Send a text message4",
      "webhookId": "85aeb132-4836-49ab-906a-a2c14a2a662a",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "0",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "824fd79d-c41e-4a0e-b2cf-934b4c53bc4d"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "14b71a4c-dc73-44ee-8b00-c5ab0a1926ff",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "680b6f95-c88c-4240-af86-8831e9361e68",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0795cd3b-d09a-4c06-bd11-51f5587be3e3",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "d31f24cd-2440-43e9-994f-90de027d1476",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "453cea64-907a-4085-a4be-220b46c0cdfd",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "5a2043d8-75fc-43d0-9cef-2c13d90117af",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "6",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "69583d37-a27b-4256-a997-894081214ab1",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "7",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "77dd5c14-321b-4bcd-83e9-cf055be0f311",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "8",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "3efe5473-5575-4f9b-a51f-c2287148eaed",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "9",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9e4f434c-dbb0-401b-8d13-48b4c5d8cf69",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "0, 1, 2, 3, 4, 5, 6, 7, 8, 9",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        1168,
        288
      ],
      "id": "c840fe2b-f593-45d3-a5ea-875bbfb71851",
      "name": "Switch"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Estoy aqu칤 para ayudarte 游땕  Puedes: \n- Agendar citas \n- Organizar tareas \n- Crear recordatorios  \nEscribe el n칰mero de la opci칩n que quieras usar. \n9. Volver al men칰 principal",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1408,
        0
      ],
      "id": "4e0438d7-3bc4-4437-89d4-402799fd1be9",
      "name": "Send a text message2",
      "webhookId": "4be70f1f-e3c7-44fd-94fb-b9ffe0454896",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "text": "Ups 游땐 esa opci칩n no existe.  Por favor escribe uno de los n칰meros que ves en pantalla.  Est치s en: Men칰 principal Opciones disponibles: 0 al 9",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1440,
        672
      ],
      "id": "2844bb8e-f2bb-4bb7-bb9e-8f4f0874c457",
      "name": "Send a text message",
      "webhookId": "3dffe3ee-2d25-48e6-a5c6-e87b695b3ae9",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=游늰 Agenda (citas)\n\n쯈u칠 deseas hacer?\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n9. Volver al men칰 principal\n\nTip: escribe solo el n칰mero\n",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1584,
        112
      ],
      "id": "c7adba0b-28b6-4b6e-93d5-d13ad9c6f26c",
      "name": "Send a text message1",
      "webhookId": "612d564b-b1fb-4c0b-93c0-dad89a409fb7",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        384,
        176
      ],
      "id": "c91ad022-5562-4657-b3ba-7f52448be8f3",
      "name": "Get row(s) in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $json.message.chat.first_name }}",
            "row_number": 2
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        192,
        176
      ],
      "id": "b0e9cd68-9dfa-4ba5-beff-64d4c6537eac",
      "name": "Update row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "9",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e52df4b0-5e76-4034-a20f-84ddbe8a5d7c"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "714b53b8-5d0c-4ad6-a884-92890ca1e43c",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "empty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0e7a8b5b-6b00-4612-b578-5d5359463332",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "menu",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "64d90831-4584-4b1e-8b3e-21960edd0709",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "agenda",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "2c45914e-5f6c-4a6d-bf3c-2eceb1da4a77",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "reportes",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "faf87871-e572-4588-9408-d12fe2039de6",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "tareas",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        304,
        400
      ],
      "id": "2600090a-91d5-49e4-9cd2-489c71f925fd",
      "name": "Switch2"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "=menu"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        928,
        -64
      ],
      "id": "db7183cc-7879-4852-9cd5-c5f028e379ff",
      "name": "Update row in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "text": "=Hola 游땕 쯖칩mo est치s?.\nBienvenida Men칰 principal: \n0. Ayuda \n1. Agenda (citas) \n2. Tareas \n3. Recordatorios \n4. H치bitos \n5. Listas \n6. Reportes \n7. Configuraci칩n \n8. Administrador \n- Mensaje de orientaci칩n:  Tip r치pido: escribe solo el n칰mero (por ejemplo: 1) y presiona enviar.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        736,
        96
      ],
      "id": "46bd3f2b-fc97-46e8-bd5d-4754b3f6c02d",
      "name": "Send a text message5",
      "webhookId": "85aeb132-4836-49ab-906a-a2c14a2a662a",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "=menu"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        912,
        96
      ],
      "id": "b2b2c9c7-dfca-45c6-ad11-d36a3b43c5cc",
      "name": "Update row in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "text": "=Hola 游땕 쯖칩mo est치s?.\nBienvenida Men칰 principal: \n0. Ayuda \n1. Agenda (citas) \n2. Tareas \n3. Recordatorios \n4. H치bitos \n5. Listas \n6. Reportes \n7. Configuraci칩n \n8. Administrador \n- Mensaje de orientaci칩n:  Tip r치pido: escribe solo el n칰mero (por ejemplo: 1) y presiona enviar.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1616,
        672
      ],
      "id": "4b8fcfbf-c4b2-4cc3-94f0-b98d7398e5af",
      "name": "Send a text message6",
      "webhookId": "85aeb132-4836-49ab-906a-a2c14a2a662a",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "824fd79d-c41e-4a0e-b2cf-934b4c53bc4d"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "14b71a4c-dc73-44ee-8b00-c5ab0a1926ff",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "680b6f95-c88c-4240-af86-8831e9361e68",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0795cd3b-d09a-4c06-bd11-51f5587be3e3",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "d31f24cd-2440-43e9-994f-90de027d1476",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "3efe5473-5575-4f9b-a51f-c2287148eaed",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "9",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        736,
        1472
      ],
      "id": "0c36dc6c-99af-436c-8b78-3953909c576d",
      "name": "Switch3"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "agenda"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1792,
        112
      ],
      "id": "f4e4affa-c877-49bc-9dc2-b8f0a6803520",
      "name": "Update row in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "fd58e917-3b0a-4429-aa50-f1dd7ba006b3",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "ea71a392-020f-4b52-a9a5-c90d3cc31a38",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        512,
        2080
      ],
      "id": "828f29a5-0745-4ff0-b5b1-cc3a2325ff9a",
      "name": "If"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "agenda",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1104,
        1248
      ],
      "id": "d9528df1-7d7c-4009-ae1e-f561c7f9ca88",
      "name": "Update row in sheet4",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "544218d5-b21c-4da7-a408-53417d1ae082"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "d4cb0390-a41c-4d7b-b79a-3a0f69c12060",
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "2f38edb2-1fc5-4ed1-b3ea-fe66336a824b",
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
                    "rightValue": 3,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "61f23344-93bf-40a2-99c6-f9cabf530793",
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
                    "rightValue": 4,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9c1abd6a-da5e-4b63-8095-8ecc5be263aa",
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
                    "rightValue": 5,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a5ec3004-8d43-46d7-bede-453d151a936a",
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
                    "rightValue": 6,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        448,
        2384
      ],
      "id": "5ded716c-4cc2-424b-a2bf-d26ead4b6aba",
      "name": "Switch1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "8c7b2226-388d-4e51-a119-322d8d57733e",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
              "rightValue": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$",
              "operator": {
                "type": "string",
                "operation": "regex"
              }
            },
            {
              "id": "f187973b-4a9a-4465-ae2c-5d61c98ce5ff",
              "leftValue": "",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        800,
        1904
      ],
      "id": "b591d067-3e40-40c2-b03e-cfaa7579e1ed",
      "name": "If1"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv치lida , el formato requerido es YYYY-MM-DD \nEjemplo: 2026-01-28",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        960,
        1968
      ],
      "id": "8b9d0f0a-2786-4e78-b357-3cbc9e017c64",
      "name": "Send a text message3",
      "webhookId": "111f08cb-7a91-43ec-aabf-a3ae9acb03f9",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "2",
            "datos_parciales2": "",
            "datos_parciales1": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        960,
        1808
      ],
      "id": "ea16b732-fb93-4f8c-a783-6016631725d2",
      "name": "Update row in sheet5",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu cita.\n\nPaso 1 de 6\n쮺u치l es la fecha de la cita?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        880,
        1248
      ],
      "id": "b56dfbe1-1a75-4f07-b2ca-0d64b51ce964",
      "name": "Send a text message7",
      "webhookId": "c41bf511-bb02-4748-815a-29c791c29763",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ahora a침ade la hora,\nEjemplo: 23:59",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1424,
        2032
      ],
      "id": "5024db6b-0f9b-4116-ba0b-7ef7e7adb1df",
      "name": "Send a text message8",
      "webhookId": "98173d56-ea63-4718-8499-6c548ac88606",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "8c7b2226-388d-4e51-a119-322d8d57733e",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
              "rightValue": "^([01]\\d|2[0-3]):[0-5]\\d$",
              "operator": {
                "type": "string",
                "operation": "regex"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        1136,
        2032
      ],
      "id": "98e3ff54-77e6-4281-9bb0-220fe135f178",
      "name": "If2"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "3",
            "datos_parciales1": "={{ $json.datos_parciales1 }}",
            "row_number": 2,
            "datos_parciales2": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales3": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1648,
        1856
      ],
      "id": "c25780bf-ba5a-404e-a325-ba2e519c151b",
      "name": "Update row in sheet6",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 6\n쮸 qu칠 hora ser치 la cita?\n\nFormato 24 horas (HH:MM)\nEjemplo: 14:30\n\n9. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1152,
        1808
      ],
      "id": "d54ed1f6-b200-4c9f-86cb-1e7461b6a2bf",
      "name": "Send a text message9",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1408,
        1856
      ],
      "id": "3de455ac-a53a-47f8-b7d3-e2e9b411be15",
      "name": "Get row(s) in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 6\n쮸 nombre de qui칠n es la cita?\n\nEscribe el nombre completo.\n\n9. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1856,
        1856
      ],
      "id": "97a40c79-994a-481d-8306-cbe0ea2cf143",
      "name": "Send a text message10",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "4",
            "datos_parciales1": "={{ $json.datos_parciales1 }}",
            "datos_parciales2": "={{ $json.datos_parciales2 }}",
            "row_number": 2,
            "datos_parciales3": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1296,
        2208
      ],
      "id": "4c956260-2148-4d91-ab92-9b8f23029e3f",
      "name": "Update row in sheet7",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1088,
        2208
      ],
      "id": "b0fbbb48-aff6-4758-a8ac-1323aa5259d9",
      "name": "Get row(s) in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 4 de 6\nCu칠ntame brevemente el motivo de la cita.\n\nEjemplo: Asesor칤a t칠cnica\n\n9. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1504,
        2208
      ],
      "id": "de6e2ec2-eaf9-44e7-9a1c-51cc177ad0f3",
      "name": "Send a text message12",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "5",
            "datos_parciales1": "={{ $json.datos_parciales1 }}",
            "datos_parciales2": "={{ $json.datos_parciales2 }}",
            "row_number": 2,
            "datos_parciales4": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales3": "={{ $json.datos_parciales3 }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1280,
        2384
      ],
      "id": "9db95410-f672-4890-bec0-a430bb4cbc00",
      "name": "Update row in sheet8",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1088,
        2384
      ],
      "id": "5db6e72b-a7ce-4458-8e8b-6d6c1cef4385",
      "name": "Get row(s) in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 5 de 6\n쮺칩mo ser치 la atenci칩n?\n\n1. Presencial\n2. Virtual\n3. Llamada\n9. Cancelar\n",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1456,
        2384
      ],
      "id": "6ca20a43-c6a9-4a76-97e2-cd5b82d16667",
      "name": "Send a text message13",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "6",
            "datos_parciales1": "={{ $json.datos_parciales1 }}",
            "datos_parciales2": "={{ $json.datos_parciales2 }}",
            "row_number": 2,
            "datos_parciales4": "={{ $json.datos_parciales4 }}",
            "datos_parciales3": "={{ $json.datos_parciales3 }}",
            "datos_parciales5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales6": "Presencial"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1392,
        2608
      ],
      "id": "2c165f62-0852-4a34-8c00-894a763ae6cd",
      "name": "Update row in sheet9",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1200,
        2608
      ],
      "id": "3d1e916e-b7cf-4eeb-ae66-c1dec3c60cd2",
      "name": "Get row(s) in sheet4",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci칩n de tu cita:\n\nFecha: {{ $json.datos_parciales1 }}\nHora: {{ $json.datos_parciales3 }}\nCliente: {{ $json.datos_parciales2 }}\nMotivo: {{ $json.datos_parciales4 }}\nCanal: Presencial\n\n쯈u칠 deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci칩n\n3. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1568,
        2608
      ],
      "id": "48a92da1-ac74-417a-a7f8-69406e97de44",
      "name": "Send a text message14",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e91e166f-383c-41ce-9574-65c7a6716699"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "fad12fbc-fcda-4d80-abe6-0663d140af62",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0057b5dd-0cdd-4655-b8ec-26530b983241",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        928,
        2752
      ],
      "id": "c3335742-0e1e-4a59-ab2d-10118ec6b3ca",
      "name": "Switch4"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "6",
            "datos_parciales1": "={{ $json.datos_parciales1 }}",
            "datos_parciales2": "={{ $json.datos_parciales2 }}",
            "row_number": 2,
            "datos_parciales4": "={{ $json.datos_parciales4 }}",
            "datos_parciales3": "={{ $json.datos_parciales3 }}",
            "datos_parciales5": "={{ $('Telegram Trigger').item.json.message.text }} ",
            "datos_parciales6": "Virtual"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1392,
        2768
      ],
      "id": "046659b5-a855-4f4e-963a-f6035eb951be",
      "name": "Update row in sheet10",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1200,
        2768
      ],
      "id": "5549237d-67b5-48cc-80d2-f1c64c682759",
      "name": "Get row(s) in sheet5",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci칩n de tu cita:\n\nFecha: {{ $json.datos_parciales1 }}\nHora: {{ $json.datos_parciales3 }}\nCliente: {{ $json.datos_parciales2 }}\nMotivo: {{ $json.datos_parciales4 }}\nCanal: Virtual\n\n쯈u칠 deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci칩n\n3. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1568,
        2768
      ],
      "id": "3619e1df-dad1-4eed-9ead-d33203162d05",
      "name": "Send a text message15",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "6",
            "datos_parciales1": "={{ $json.datos_parciales1 }}",
            "datos_parciales2": "={{ $json.datos_parciales2 }}",
            "row_number": 2,
            "datos_parciales4": "={{ $json.datos_parciales4 }}",
            "datos_parciales3": "={{ $json.datos_parciales3 }}",
            "datos_parciales5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales6": "Llamada"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1392,
        2928
      ],
      "id": "44250145-3db8-4fa5-8d0f-85df7dc0cf69",
      "name": "Update row in sheet11",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1200,
        2928
      ],
      "id": "96c404a3-a7d7-44a7-b11e-5c573a5cf2a5",
      "name": "Get row(s) in sheet6",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci칩n de tu cita:\n\nFecha: {{ $json.datos_parciales1 }}\nHora: {{ $json.datos_parciales3 }}\nCliente: {{ $json.datos_parciales2 }}\nMotivo: {{ $json.datos_parciales4 }}\nCanal: Llamada\n\n쯈u칠 deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci칩n\n3. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1568,
        2928
      ],
      "id": "4101c66d-e75b-4f8d-a234-413cf6b7a394",
      "name": "Send a text message16",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "4fd9430c-76ce-4e41-afb1-b0b04f4b6528"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "45af07bb-71d4-49a6-94ec-ba062a9a711d",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "65e3fbaa-4a65-4ef4-9dc9-0055ad88537a",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        1088,
        3296
      ],
      "id": "4c94614c-bba3-483a-8187-b07f4e3bcac6",
      "name": "Switch5"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1648,
        3120
      ],
      "id": "f6bf5bb2-264e-4e1c-a7d8-a16889848e7b",
      "name": "Get row(s) in sheet7",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Filas obtenidas desde Google Sheets (Agenda  Citas)\nconst filas = items;\n\n// Chat ID de Telegram\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\n// N칰mero base\nlet siguienteNumero = 1;\n\n// Si hay registros en la hoja\nif (filas && filas.length > 0) {\n  const numeros = [];\n\n  for (const item of filas) {\n    const id = item.json.id_cita;\n\n    if (!id) continue;\n\n    // Acepta formatos tipo: CITA-001, CITA-12, etc.\n    const match = String(id).match(/^CITA-(\\d+)$/);\n    if (match) {\n      numeros.push(parseInt(match[1], 10));\n    }\n  }\n\n  // Si se encontraron IDs v치lidos, tomamos el mayor y sumamos 1\n  if (numeros.length > 0) {\n    siguienteNumero = Math.max(...numeros) + 1;\n  }\n}\n\n// Formato final CITA-001\nconst idCita = `CITA-${String(siguienteNumero).padStart(3, '0')}`;\n\nreturn [\n  {\n    json: {\n      id_cita: idCita,\n      chatId: chatId\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1440,
        3120
      ],
      "id": "46dde1b3-2ce6-4624-bd46-26a69f99dfe7",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1248,
        3120
      ],
      "id": "c14197ea-b077-4bd2-8904-22ba9b8638b7",
      "name": "Get row(s) in sheet8",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const ahora = new Date();\n\nconst fechaRaw = $json.fecha; // ej: 2026-03-16\nconst horaRaw = $json.hora;   // ej: 15:00\n\n// Combinar fecha y hora\nconst fechaHoraStr = `${fechaRaw}T${horaRaw}:00`;\nconst fechaCita = new Date(fechaHoraStr);\n\nlet estado;\n\n// Validar fecha\nif (isNaN(fechaCita.getTime())) {\n  throw new Error('Fecha inv치lida: ' + fechaHoraStr);\n}\n\n// Comparaci칩n real\nif (fechaCita.getTime() < ahora.getTime()) {\n  estado = 'Incompleta';\n} else {\n  estado = 'Completa';\n}\n\nreturn [\n  {\n    json: {\n      estado\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1824,
        3120
      ],
      "id": "e8b0dce9-02cd-437f-a416-4ceeda67da33",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "citas",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "estado": "={{ $json.estado }}",
            "id_cita": "={{ $('Code in JavaScript').item.json.id_cita }}",
            "fecha": "={{ $('Get row(s) in sheet7').item.json.datos_parciales1 }}",
            "hora": "={{ $('Get row(s) in sheet7').item.json.datos_parciales2 }}",
            "nombre": "={{ $('Get row(s) in sheet7').item.json.datos_parciales3 }}",
            "motivo": "={{ $('Get row(s) in sheet7').item.json.datos_parciales4 }}",
            "canal": "={{ $('Get row(s) in sheet7').item.json.datos_parciales6 }}",
            "creado_por": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "timestamp_creacion": "={{$now}}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2000,
        3120
      ],
      "id": "3fdc85f3-38d4-4d9e-bda8-6e09108391c2",
      "name": "Append row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Ya agendaste tu cita",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2192,
        3120
      ],
      "id": "f9e9a08b-1fac-4615-8449-86e21fef244f",
      "name": "Send a text message11",
      "webhookId": "879657f6-276b-4108-a067-3768f6803c4d",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "content": "Agenda Men칰\n"
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        800,
        3152
      ],
      "id": "7ed73908-8d89-46de-a4dd-463dcc29c4d0",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1408,
        3280
      ],
      "id": "2f7549af-1466-477b-b58f-c68d88a5a0d5",
      "name": "Update row in sheet12",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu cita.\n\nPaso 1 de 6\n쮺u치l es la fecha de la cita?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1584,
        3280
      ],
      "id": "b55ebcdb-5d58-4f3b-8b16-a933bec328e8",
      "name": "Send a text message17",
      "webhookId": "6df0db17-d023-44ed-95d6-d087cbc71b09",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1328,
        3456
      ],
      "id": "6c98e2e8-c31b-4cc6-bdce-8085fb561db9",
      "name": "Update row in sheet13",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Se ha cancelado tu cita.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1520,
        3456
      ],
      "id": "ed6326c8-0eb5-40cf-98a8-b0bfc10ec0db",
      "name": "Send a text message18",
      "webhookId": "6df0db17-d023-44ed-95d6-d087cbc71b09",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "citas",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=0"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        896,
        1408
      ],
      "id": "102429c6-126d-4b11-957c-380fe4a0d67d",
      "name": "Get row(s) in sheet9",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const citas = items.map(i => i.json);\n\nconst incompletas = citas.filter(t => t.estado === 'Incompleta');\n\nlet mensaje = '*Citas pendientes*\\n\\n';\n\nif (incompletas.length === 0) {\n  mensaje += 'No tienes citas pendientes.';\n} else {\n  incompletas.forEach((cita, index) => {\n    mensaje +=\n      `${index + 1}. *${cita.id_cita}*\\n` +\n      `${cita.fecha}\\n` +\n      `${cita.hora}\\n` +\n      `${cita.canal}\\n\\n`;\n  });\n}\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    mensaje,\n    chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1104,
        1408
      ],
      "id": "7662cf96-891a-4bf0-b981-c3f430fe866f",
      "name": "Code in JavaScript2"
    },
    {
      "parameters": {
        "content": "## Switch de Agenda\n",
        "width": 150
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        528,
        1408
      ],
      "id": "978a9077-62d8-4657-a310-e9540db63ad2",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1296,
        1408
      ],
      "id": "eb9e20a5-57fb-4897-8116-3f19a1a93727",
      "name": "Send a text message19",
      "webhookId": "3d6e45d7-2e53-4efb-a481-bf32e6695863",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto. Voy a generarte el reporte de productividad.\n\nEn un momento ya te lo muestro.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1424,
        464
      ],
      "id": "58c0072a-8b8d-4add-bc88-3586b995d9c4",
      "name": "Send a text message20",
      "webhookId": "612d564b-b1fb-4c0b-93c0-dad89a409fb7",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "reportes"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1632,
        464
      ],
      "id": "025420eb-6cda-4021-a617-140eb828ba02",
      "name": "Update row in sheet14",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "citas",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=0"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -1104,
        736
      ],
      "id": "b1efd432-1efd-4781-b3d1-85157d2583ae",
      "name": "Get row(s) in sheet10",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "=Reporte de productividad (AgendaBot)\n\nResumen general\n- Usuario m치s activo: {{ $json.usuario_mas_activo }}\n- Total citas registradas: {{ $('Code in JavaScript4').item.json.total_citas }}\n- Total tareas registradas: {{ $json.total_tareas }}\n- Total interacciones con el bot: \n\nDetalle por usuario\n1) {{ $json.detalle_por_usuario.Zeros }}\n   - Citas: {{ $('Code in JavaScript4').item.json.total_citas }} (Completadas: {{ $('Code in JavaScript4').item.json.detalle_por_usuario.Zeros.completadas }} | Canceladas: {{ $('Code in JavaScript4').item.json.detalle_por_usuario.Zeros.canceladas }})\n   - Tareas: {{ $json.total_tareas }} (Hechas: {{ $json.detalle_por_usuario.Zeros.hechas }} | Pendientes: {{ $json.detalle_por_usuario.Zeros.pendientes }} )\n   - Interacciones: \n",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -368,
        736
      ],
      "id": "245accbc-e7f7-4633-a353-7bfa5d2b30b4",
      "name": "Send a text message21",
      "webhookId": "7bff037d-754f-4f25-af53-7580e9657892",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "fd58e917-3b0a-4429-aa50-f1dd7ba006b3",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "ea71a392-020f-4b52-a9a5-c90d3cc31a38",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -1216,
        944
      ],
      "id": "5e3c0db2-8610-4352-b4db-54e7d528fb9b",
      "name": "If3"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1715121051,
          "mode": "list",
          "cachedResultName": "tareas",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1715121051"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -768,
        736
      ],
      "id": "37f43a03-636a-4d91-ad90-f7d8f1f1e7db",
      "name": "Get row(s) in sheet11",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Filas que llegan desde Google Sheets (hoja Citas)\nconst filas = items;\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\n// Totales generales\nlet totalCitas = 0;\n\n// Conteo por usuario\nconst usuarios = {};\n\n// Recorremos cada fila\nfor (const item of filas) {\n  const row = item.json;\n\n  if (!row.id_cita) continue;\n\n  totalCitas++;\n\n  const usuario = row.creado_por || \"Zeros\";\n  const estado = (row.estado || \"\").toLowerCase();\n\n  if (!usuarios[usuario]) {\n    usuarios[usuario] = {\n      citas: 0,\n      completadas: 0,\n      pendientes: 0,\n      canceladas: 0,\n    };\n  }\n\n  usuarios[usuario].citas++;\n\n  if (estado === \"completada\") usuarios[usuario].completadas++;\n  if (estado === \"pendiente\") usuarios[usuario].pendientes++;\n  if (estado === \"cancelada\") usuarios[usuario].canceladas++;\n}\n\n// Usuario m치s activo\nlet usuarioMasActivo = \"$('Telegram Trigger').first().json.message.chat.first_name\";\nlet maxCitas = 0;\n\nfor (const usuario in usuarios) {\n  if (usuarios[usuario].citas > maxCitas) {\n    maxCitas = usuarios[usuario].citas;\n    usuarioMasActivo = usuario;\n  }\n}\n\nreturn [\n  {\n    json: {\n      chatId,\n      total_citas: totalCitas,\n      usuario_mas_activo: usuarioMasActivo,\n      detalle_por_usuario: usuarios\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -928,
        736
      ],
      "id": "15246f75-f129-44f7-a143-8c47613c1675",
      "name": "Code in JavaScript4"
    },
    {
      "parameters": {
        "jsCode": "// Filas que llegan desde Google Sheets (hoja Tareas)\nconst filas = items;\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\n// Totales generales\nlet totalTareas = 0;\n\n// Conteo por usuario\nconst usuarios = {};\n\n// Recorremos cada fila\nfor (const item of filas) {\n  const row = item.json;\n\n  if (!row.id_tarea) continue;\n\n  totalTareas++;\n\n  const usuario = row.creado_por || \"Zeros\";\n  const estado = (row.estado || \"\").toLowerCase();\n\n  if (!usuarios[usuario]) {\n    usuarios[usuario] = {\n      tareas: 0,\n      hechas: 0,\n      pendientes: 0,\n    };\n  }\n\n  usuarios[usuario].tareas++;\n\n  if (estado === \"hecha\" || estado === \"Completada\") {\n    usuarios[usuario].hechas++;\n  }\n\n  if (estado === \"pendiente\") {\n    usuarios[usuario].pendientes++;\n  }\n}\n\n// Usuario m치s activo (m치s tareas registradas)\nlet usuarioMasActivo = \"\";\nlet maxTareas = 0;\n\nfor (const usuario in usuarios) {\n  if (usuarios[usuario].tareas > maxTareas) {\n    maxTareas = usuarios[usuario].tareas;\n    usuarioMasActivo = usuario;\n  }\n}\n\nreturn [\n  {\n    json: {\n      chatId,\n      total_tareas: totalTareas,\n      usuario_mas_activo: usuarioMasActivo,\n      detalle_por_usuario: usuarios\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -560,
        736
      ],
      "id": "6907ca17-d644-440f-a495-1f72f5ab5cc0",
      "name": "Code in JavaScript5"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=游늰 Agenda (tareas)\n\n쯈u칠 deseas hacer?\n1. Agendar una nueva tarea\n2. Consultar tus tareas\n3. Reprogramar una tarea\n4. Cancelar una tarea\n9. Volver al men칰 principal\n\nTip: escribe solo el n칰mero\n",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1456,
        288
      ],
      "id": "ff297866-7996-4b97-8f31-99b8764c01e8",
      "name": "Send a text message22",
      "webhookId": "612d564b-b1fb-4c0b-93c0-dad89a409fb7",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "tareas",
            "paso_actual": ""
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1664,
        288
      ],
      "id": "a0d85f45-b28e-4878-9f7a-593e802b8295",
      "name": "Update row in sheet15",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "824fd79d-c41e-4a0e-b2cf-934b4c53bc4d"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "14b71a4c-dc73-44ee-8b00-c5ab0a1926ff",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "680b6f95-c88c-4240-af86-8831e9361e68",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0795cd3b-d09a-4c06-bd11-51f5587be3e3",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "d31f24cd-2440-43e9-994f-90de027d1476",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "3efe5473-5575-4f9b-a51f-c2287148eaed",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "9",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -1200,
        1504
      ],
      "id": "9b9e4b9f-88f9-45e3-8fe9-d14863ddb8aa",
      "name": "Switch6"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "fd58e917-3b0a-4429-aa50-f1dd7ba006b3",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "ea71a392-020f-4b52-a9a5-c90d3cc31a38",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -1424,
        2080
      ],
      "id": "a12c3efe-9b64-4481-beee-7120d879351a",
      "name": "If4"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "tareas",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -800,
        1264
      ],
      "id": "46d84099-7b46-43a8-acdc-5c47426b5751",
      "name": "Update row in sheet16",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "544218d5-b21c-4da7-a408-53417d1ae082"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "d4cb0390-a41c-4d7b-b79a-3a0f69c12060",
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "61f23344-93bf-40a2-99c6-f9cabf530793",
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
                    "rightValue": 4,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9c1abd6a-da5e-4b63-8095-8ecc5be263aa",
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "dateTime",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a5ec3004-8d43-46d7-bede-453d151a936a",
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
                    "rightValue": 6,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -1312,
        2384
      ],
      "id": "b6925bfb-48f1-40b7-bde9-0cec40a8d467",
      "name": "Switch7"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "8c7b2226-388d-4e51-a119-322d8d57733e",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
              "rightValue": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$",
              "operator": {
                "type": "string",
                "operation": "regex"
              }
            },
            {
              "id": "f187973b-4a9a-4465-ae2c-5d61c98ce5ff",
              "leftValue": "",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -1120,
        1920
      ],
      "id": "4262b054-9686-4747-a641-c48526fbf039",
      "name": "If5"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv치lida , el formato requerido es YYYY-MM-DD \nEjemplo: 2026-01-28",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -944,
        1984
      ],
      "id": "656e97a4-ba45-4d33-8946-14c03eead27f",
      "name": "Send a text message23",
      "webhookId": "111f08cb-7a91-43ec-aabf-a3ae9acb03f9",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "tareas",
            "paso_actual": "2",
            "datos_parciales1": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -944,
        1824
      ],
      "id": "da6125e1-2c7e-494c-bc26-b15ee9312698",
      "name": "Update row in sheet17",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu tarea.\n\nPaso 1 de 6\n쮺u치l es la fecha de entrega?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -992,
        1264
      ],
      "id": "436fa416-b7e4-4853-ba0a-c670e7408160",
      "name": "Send a text message24",
      "webhookId": "c41bf511-bb02-4748-815a-29c791c29763",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "tareas",
            "paso_actual": "3",
            "datos_parciales1": "={{ $json.datos_parciales1 }}",
            "row_number": 2,
            "datos_parciales2": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales3": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -464,
        2144
      ],
      "id": "2f12e389-5d1f-4ea6-8551-f1ec8576a9b3",
      "name": "Update row in sheet18",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 6\n쮺u치l es el t칤tulo de la tarea?\n\nEjemplo: Proyecto_IA\n\n9. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -752,
        1824
      ],
      "id": "10084ba3-56d6-4e86-aecf-91344b517093",
      "name": "Send a text message26",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -704,
        2144
      ],
      "id": "6c64e241-147e-47b8-a0ff-09e5e29caf18",
      "name": "Get row(s) in sheet12",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 6\n쮸 nombre de qui칠n se cre칩 la tarea?\n\nEscribe el nombre completo.\n\n9. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -256,
        2144
      ],
      "id": "13aa091b-09b9-49a3-864a-00f3d38d1ba0",
      "name": "Send a text message27",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "tareas",
            "paso_actual": "4",
            "datos_parciales1": "={{ $json.datos_parciales1 }}",
            "datos_parciales2": "={{ $json.datos_parciales2 }}",
            "row_number": 2,
            "datos_parciales3": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -736,
        2400
      ],
      "id": "afde5fe2-d594-4023-adc3-0f52c1e757e5",
      "name": "Update row in sheet19",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -976,
        2400
      ],
      "id": "7e48cdc9-673d-44f7-abd1-ae6b85cab3e9",
      "name": "Get row(s) in sheet13",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci칩n de tu cita:\n\nFecha_objetiva: {{ $json.datos_parciales1 }}\nT칤tulo: {{ $json.datos_parciales3 }}\nCreado_por: {{ $json.datos_parciales2 }}\nPrioridad: \n\n쯈u칠 deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci칩n\n3. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -528,
        2400
      ],
      "id": "d8a09b54-6e70-491a-b915-416e7d510e03",
      "name": "Send a text message30",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e91e166f-383c-41ce-9574-65c7a6716699"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "fad12fbc-fcda-4d80-abe6-0663d140af62",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0057b5dd-0cdd-4655-b8ec-26530b983241",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -976,
        2768
      ],
      "id": "aee3caa7-7687-44b9-887e-506b8de029d8",
      "name": "Switch8"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "6",
            "datos_parciales1": "={{ $json.datos_parciales1 }}",
            "datos_parciales2": "={{ $json.datos_parciales2 }}",
            "row_number": 2,
            "datos_parciales4": "={{ $json.datos_parciales4 }}",
            "datos_parciales3": "={{ $json.datos_parciales3 }}",
            "datos_parciales5": "={{ $('Telegram Trigger').item.json.message.text }} ",
            "datos_parciales6": "Virtual"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -512,
        2784
      ],
      "id": "9936c56b-9b37-4179-b8ce-981946a80817",
      "name": "Update row in sheet22",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -704,
        2784
      ],
      "id": "e655c8da-6af8-494e-aec4-72384e45324b",
      "name": "Get row(s) in sheet16",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci칩n de tu cita:\n\n\nFecha_objetiva: {{ $json.datos_parciales1 }}\nT칤tulo: {{ $json.datos_parciales3 }}\nCreado_por: {{ $json.datos_parciales2 }}\nPrioridad: Media\n\n쯈u칠 deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci칩n\n3. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -336,
        2784
      ],
      "id": "5cfcdf7e-fdac-4e94-81b2-63be6c68015e",
      "name": "Send a text message31",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "6",
            "datos_parciales1": "={{ $json.datos_parciales1 }}",
            "datos_parciales2": "={{ $json.datos_parciales2 }}",
            "row_number": 2,
            "datos_parciales4": "={{ $json.datos_parciales4 }}",
            "datos_parciales3": "={{ $json.datos_parciales3 }}",
            "datos_parciales5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales6": "Llamada"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -512,
        2944
      ],
      "id": "17a2ead4-501f-4d2d-9630-9e2ad71bd1e2",
      "name": "Update row in sheet23",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -704,
        2944
      ],
      "id": "a17bab82-2633-4a69-b0a5-5639b1625cfd",
      "name": "Get row(s) in sheet17",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci칩n de tu cita:\n\nFecha_objetiva: {{ $json.datos_parciales1 }}\nT칤tulo: {{ $json.datos_parciales3 }}\nCreado_por: {{ $json.datos_parciales2 }}\nPrioridad: Alta\n\n쯈u칠 deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci칩n\n3. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -336,
        2944
      ],
      "id": "49cd5109-abae-48a6-b83b-8416e0e395a9",
      "name": "Send a text message32",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "4fd9430c-76ce-4e41-afb1-b0b04f4b6528"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "45af07bb-71d4-49a6-94ec-ba062a9a711d",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "65e3fbaa-4a65-4ef4-9dc9-0055ad88537a",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -1024,
        3312
      ],
      "id": "04fa90ab-ceee-44d3-b659-d89058d19677",
      "name": "Switch9"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -464,
        3136
      ],
      "id": "fe1ac885-3ae3-4f17-9be1-27fc68a2f2be",
      "name": "Get row(s) in sheet18",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Filas obtenidas desde Google Sheets\nconst filas = items;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n// Valor inicial por defecto\nlet siguienteNumero = 1;\n\n// Si existen filas, buscamos el 칰ltimo ID\nif (filas.length > 0) {\n  const numeros = filas\n    .map(item => {\n      const id = item.json.id_cita;\n      if (!id) return null;\n\n      // Extrae el n칰mero de CITA-001\n      const match = id.match(/TAREA-(\\d+)/);\n      return match ? parseInt(match[1], 10) : null;\n    })\n    .filter(n => n !== null);\n\n  if (numeros.length > 0) {\n    siguienteNumero = Math.max(...numeros) + 1;\n  }\n}\n\n// Formatear con ceros a la izquierda\nconst idTarea = `TAREA-${String(siguienteNumero).padStart(3, '0')}`;\n\nreturn [\n  {\n    json: {\n      id_tarea: idTarea,\n      chatId: chatId\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -672,
        3136
      ],
      "id": "802595bf-7a69-40fd-aafc-c9e3de13be59",
      "name": "Code in JavaScript3"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -864,
        3136
      ],
      "id": "8e37656f-efd8-4102-a1b6-1dcfc2c45fcb",
      "name": "Get row(s) in sheet19",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const ahora = new Date();\n\nconst fechaRaw = $json.fecha; // ej: 2026-03-16\nconst horaRaw = $json.hora;   // ej: 15:00\n\n// Combinar fecha y hora\nconst fechaHoraStr = `${fechaRaw}T${horaRaw}:00`;\nconst fechaCita = new Date(fechaHoraStr);\n\nlet estado;\n\n// Validar fecha\nif (isNaN(fechaCita.getTime())) {\n  throw new Error('Fecha inv치lida: ' + fechaHoraStr);\n}\n\n// Comparaci칩n real\nif (fechaCita.getTime() < ahora.getTime()) {\n  estado = 'Incompleta';\n} else {\n  estado = 'Completa';\n}\n\nreturn [\n  {\n    json: {\n      estado\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -288,
        3136
      ],
      "id": "a81963f0-749e-4d8b-a609-3a3c2f9d8804",
      "name": "Code in JavaScript6"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Ya agendaste tu cita",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        160,
        3136
      ],
      "id": "970de664-ffae-4755-bd5f-19121e5ad984",
      "name": "Send a text message33",
      "webhookId": "879657f6-276b-4108-a067-3768f6803c4d",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "content": "Agenda Tareas\n"
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1312,
        3168
      ],
      "id": "b7682537-3621-43b7-85aa-3a6e15bc3b03",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -704,
        3296
      ],
      "id": "82a756d0-2b63-4e62-8d7b-cbc1e0b3f486",
      "name": "Update row in sheet24",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu tarea.\n\nPaso 1 de 6\n쮺u치l es la fecha de la tarea?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -528,
        3296
      ],
      "id": "85c29279-1f7d-4e27-82cc-d52a9a96a117",
      "name": "Send a text message34",
      "webhookId": "6df0db17-d023-44ed-95d6-d087cbc71b09",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "agenda",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -784,
        3472
      ],
      "id": "a9eaeab4-ec65-4bca-8313-af27e29b894f",
      "name": "Update row in sheet25",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Se ha cancelado tu tarea.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -592,
        3472
      ],
      "id": "951dc2c0-ffc5-4f1e-a5a7-fa011c2116b9",
      "name": "Send a text message35",
      "webhookId": "6df0db17-d023-44ed-95d6-d087cbc71b09",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1715121051,
          "mode": "list",
          "cachedResultName": "tareas",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1715121051"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -1008,
        1424
      ],
      "id": "19629bba-d27c-4f0f-8082-be5f2fbe0177",
      "name": "Get row(s) in sheet20",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const citas = items.map(i => i.json);\n\nconst incompletas = citas.filter(t => t.estado === 'Incompleta');\n\nlet mensaje = '*Citas pendientes*\\n\\n';\n\nif (incompletas.length === 0) {\n  mensaje += 'No tienes citas pendientes.';\n} else {\n  incompletas.forEach((cita, index) => {\n    mensaje +=\n      `${index + 1}. *${cita.id_cita}*\\n` +\n      `${cita.fecha}\\n` +\n      `${cita.hora}\\n` +\n      `${cita.canal}\\n\\n`;\n  });\n}\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    mensaje,\n    chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -800,
        1424
      ],
      "id": "873bcd9b-07a3-4fb2-8975-ab4be04cbb67",
      "name": "Code in JavaScript7"
    },
    {
      "parameters": {
        "content": "## Switch de tareas",
        "width": 150
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1376,
        1424
      ],
      "id": "5fa19986-f972-46a4-a97c-a8ab1f240d98",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -608,
        1424
      ],
      "id": "4e166cd0-52ba-47ae-960d-29defaa3e8df",
      "name": "Send a text message36",
      "webhookId": "3d6e45d7-2e53-4efb-a481-bf32e6695863",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -704,
        2624
      ],
      "id": "ac623923-7e03-46cd-bae3-01641f120f37",
      "name": "Get row(s) in sheet15",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1237119172,
          "mode": "list",
          "cachedResultName": "sessions",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1237119172"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "tareas",
            "paso_actual": "6",
            "datos_parciales1": "={{ $json.datos_parciales1 }}",
            "datos_parciales2": "={{ $json.datos_parciales2 }}",
            "row_number": 2,
            "datos_parciales4": "={{ $json.datos_parciales4 }}",
            "datos_parciales3": "={{ $json.datos_parciales3 }}",
            "datos_parciales5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales6": "Presencial"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales1",
              "displayName": "datos_parciales1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales2",
              "displayName": "datos_parciales2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales3",
              "displayName": "datos_parciales3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales4",
              "displayName": "datos_parciales4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales5",
              "displayName": "datos_parciales5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales6",
              "displayName": "datos_parciales6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -512,
        2624
      ],
      "id": "93b7f690-bfb3-4b15-9238-aa3be0eab154",
      "name": "Update row in sheet21",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci칩n de tu tarea:\n\n\nFecha_objetiva: {{ $json.datos_parciales1 }}\nT칤tulo: {{ $json.datos_parciales3 }}\nCreado_por: {{ $json.datos_parciales2 }}\nPrioridad: Baja\n쯈u칠 deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci칩n\n3. Cancelar",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -336,
        2624
      ],
      "id": "d2eacc54-6e5f-40e7-9cd5-d52b09e9730b",
      "name": "Send a text message37",
      "webhookId": "ae922069-40ff-47f6-a4c5-bee6fcca883f",
      "credentials": {
        "telegramApi": {
          "id": "9of6o4teQkBmzUiD",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM",
          "mode": "list",
          "cachedResultName": "Agenda",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1715121051,
          "mode": "list",
          "cachedResultName": "tareas",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e30IDLAPB-pv-1E3AVANDJbm936Hb1aK8BfJM9uh2pM/edit#gid=1715121051"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_tarea",
              "displayName": "id_tarea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "prioridad",
              "displayName": "prioridad",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha_objetivo",
              "displayName": "fecha_objetivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -64,
        3136
      ],
      "id": "3549c1b2-e2a7-4da0-9903-ef239b7cd7c7",
      "name": "Append row in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ul3DQyJlSZ4Jz7gQ",
          "name": "Google Sheets account 2"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Send a text message2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message22",
            "type": "main",
            "index": 0
          }
        ],
        [],
        [],
        [],
        [
          {
            "node": "Send a text message20",
            "type": "main",
            "index": 0
          }
        ],
        [],
        [],
        [],
        [
          {
            "node": "Send a text message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message1": {
      "main": [
        [
          {
            "node": "Update row in sheet3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet": {
      "main": [
        [
          {
            "node": "Switch2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch2": {
      "main": [
        [
          {
            "node": "Send a text message4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message4": {
      "main": [
        [
          {
            "node": "Update row in sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message5": {
      "main": [
        [
          {
            "node": "Update row in sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message": {
      "main": [
        [
          {
            "node": "Send a text message6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch3": {
      "main": [
        [
          {
            "node": "Send a text message7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Switch3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Update row in sheet5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message7": {
      "main": [
        [
          {
            "node": "Update row in sheet4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet5": {
      "main": [
        [
          {
            "node": "Send a text message9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If2": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet1": {
      "main": [
        [
          {
            "node": "Update row in sheet6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet6": {
      "main": [
        [
          {
            "node": "Send a text message10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet7": {
      "main": [
        [
          {
            "node": "Send a text message12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet2": {
      "main": [
        [
          {
            "node": "Update row in sheet7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet8": {
      "main": [
        [
          {
            "node": "Send a text message13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet3": {
      "main": [
        [
          {
            "node": "Update row in sheet8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet9": {
      "main": [
        [
          {
            "node": "Send a text message14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet4": {
      "main": [
        [
          {
            "node": "Update row in sheet9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch4": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet10": {
      "main": [
        [
          {
            "node": "Send a text message15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet5": {
      "main": [
        [
          {
            "node": "Update row in sheet10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet11": {
      "main": [
        [
          {
            "node": "Send a text message16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet6": {
      "main": [
        [
          {
            "node": "Update row in sheet11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch5": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet12",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet7": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet8": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet": {
      "main": [
        [
          {
            "node": "Send a text message11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet12": {
      "main": [
        [
          {
            "node": "Send a text message17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet13": {
      "main": [
        [
          {
            "node": "Send a text message18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet9": {
      "main": [
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "Send a text message19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message20": {
      "main": [
        [
          {
            "node": "Update row in sheet14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet10": {
      "main": [
        [
          {
            "node": "Code in JavaScript4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If3": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet14": {
      "main": [
        []
      ]
    },
    "Send a text message21": {
      "main": [
        []
      ]
    },
    "Get row(s) in sheet11": {
      "main": [
        [
          {
            "node": "Code in JavaScript5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript4": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript5": {
      "main": [
        [
          {
            "node": "Send a text message21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message22": {
      "main": [
        [
          {
            "node": "Update row in sheet15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch6": {
      "main": [
        [
          {
            "node": "Send a text message24",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If4": {
      "main": [
        [
          {
            "node": "Switch6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch7": {
      "main": [
        [
          {
            "node": "If5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet12",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet13",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If5": {
      "main": [
        [
          {
            "node": "Update row in sheet17",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet17": {
      "main": [
        [
          {
            "node": "Send a text message26",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message24": {
      "main": [
        [
          {
            "node": "Update row in sheet16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet18": {
      "main": [
        [
          {
            "node": "Send a text message27",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet12": {
      "main": [
        [
          {
            "node": "Update row in sheet18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet19": {
      "main": [
        [
          {
            "node": "Send a text message30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet13": {
      "main": [
        [
          {
            "node": "Update row in sheet19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch8": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet15",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet16",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet22": {
      "main": [
        [
          {
            "node": "Send a text message31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet16": {
      "main": [
        [
          {
            "node": "Update row in sheet22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet23": {
      "main": [
        [
          {
            "node": "Send a text message32",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet17": {
      "main": [
        [
          {
            "node": "Update row in sheet23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch9": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet24",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet25",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet18": {
      "main": [
        [
          {
            "node": "Code in JavaScript6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript3": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet19": {
      "main": [
        [
          {
            "node": "Code in JavaScript3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript6": {
      "main": [
        [
          {
            "node": "Append row in sheet3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet24": {
      "main": [
        [
          {
            "node": "Send a text message34",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet25": {
      "main": [
        [
          {
            "node": "Send a text message35",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet20": {
      "main": [
        [
          {
            "node": "Code in JavaScript7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript7": {
      "main": [
        [
          {
            "node": "Send a text message36",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet15": {
      "main": [
        [
          {
            "node": "Update row in sheet21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet21": {
      "main": [
        [
          {
            "node": "Send a text message37",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet3": {
      "main": [
        [
          {
            "node": "Send a text message33",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "cd9a383c-9752-46a1-bde5-8541504f62e8",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "b2f0969bb44d38e7715e3f88fac962f4df369c4569eb29bf304b20088f3aab5f"
  },
  "id": "z3NKpBUNH9f7LyAuTqKdm",
  "tags": []
}